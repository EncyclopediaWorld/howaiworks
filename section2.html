<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Section II â€” Early Exploration Â· How AI Works</title>
<link rel="stylesheet" href="styles.css">
</head><body>
<div class="progress-bar" style="background:linear-gradient(90deg,var(--a7),var(--a3))"></div>
<button class="back-top" onclick="window.scrollTo({top:0,behavior:'smooth'})">â†‘</button>
<nav class="topnav"><a href="index.html" class="logo">How AI Works</a><div class="nav-links"><a href="section1.html">I</a><a href="section2.html" class="active">II</a><a href="section3.html">III</a><a href="section4.html">IV</a><a href="section5.html">V</a><a href="section6.html">VI</a><a href="section7.html">VII</a><a href="section8.html">VIII</a></div></nav>

<div class="section-hero" style="background:radial-gradient(ellipse 60% 50% at 50% 70%,rgba(251,146,60,.05),transparent)">
  <div class="era-label" style="color:var(--a7)">Section II Â· 1960sâ€“1970s</div>
  <h1>Early Exploration & The First AI Winter</h1>
  <p>AI experiences its first cycle of hype and disillusionment, but simple yet powerful methods quietly accumulate during the winter.</p>
  <div class="nav-arrows"><a href="section1.html">â† Section I</a><a href="section3.html">Section III â†’</a></div>
</div>

<div class="models-container">

<div class="model-card"><div class="mc-head"><span class="mc-year" style="color:var(--a7)">1967</span><div class="mc-info"><h3>k-Nearest Neighbors</h3><p>Cover & Hart's k-NN algorithm â€” no training required! Look at the k nearest known samples and let majority vote decide. Extremely simple, yet surprisingly effective in many scenarios.</p></div></div>
<div class="mc-formula" style="color:var(--a7)">Å· = majority({ yâ±¼ : xâ±¼ âˆˆ Nâ‚–(x) }) No training â€” just look up and vote</div>
<div class="mc-demo" id="demo-knn"></div></div>

<div class="model-card"><div class="mc-head"><span class="mc-year" style="color:var(--a7)">1960s</span><div class="mc-info"><h3>Naive Bayes Classifier</h3><p>The Naive Bayes classifier â€” assumes all features are independent (though they usually aren't), yet this "naive" assumption is amazingly effective for spam filtering, text classification, and more.</p></div></div>
<div class="mc-formula" style="color:var(--a7)">P(C|x) âˆ P(C) Â· âˆáµ¢ P(xáµ¢|C)  Independence assumption greatly simplifies computation</div>
<div class="mc-demo" id="demo-nb"></div></div>

<div class="model-card"><div class="mc-head"><span class="mc-year" style="color:var(--a7)">1970</span><div class="mc-info"><h3>Automatic Differentiation (Chain Rule)</h3><p>Linnainmaa's automatic differentiation â€” a programmatic implementation of the chain rule. Gradients flow backward from output to inputs, forming the mathematical basis for backpropagation.</p></div></div>
<div class="mc-formula" style="color:var(--a7)">âˆ‚L/âˆ‚w = (âˆ‚L/âˆ‚a)(âˆ‚a/âˆ‚z)(âˆ‚z/âˆ‚w)  gradients flow backward through the graph</div>
<div class="mc-demo" id="demo-chain"></div></div>

</div>
<footer><a href="section1.html">â† Section I</a> Â· <a href="section3.html">Section III: The Revival â†’</a></footer>
<script src="shared.js"></script>
<script>
// ============================================================
//  K-NN â€” real-time Voronoi-style decision map + animated neighbors
// ============================================================
(function(){
const el=$('demo-knn'), [c,ctx]=createCanvas(el,750,400);
addHint(el,'ğŸ–±ï¸ Move cursor to classify Â· Left-click ğŸ”´ / Right-click ğŸ”µ to add Â· Scroll wheel = change k');
let k=5, pts=[], mx=-1, my=-1;
const W=750, H=400;

for(let i=0;i<18;i++){pts.push({x:rand(30,310),y:rand(25,375),c:0}); pts.push({x:rand(440,720),y:rand(25,375),c:1});}
// Some mixed ones
for(let i=0;i<6;i++){pts.push({x:rand(280,470),y:rand(50,350),c:Math.random()>.5?1:0});}

// Precompute regions (low-res)
let regionCanvas=document.createElement('canvas');
regionCanvas.width=W/5; regionCanvas.height=H/5;
let rctx=regionCanvas.getContext('2d');
let needsUpdate=true;

function updateRegions(){
  let img=rctx.createImageData(W/5,H/5);
  for(let y=0;y<H/5;y++) for(let x=0;x<W/5;x++){
    let rx=x*5,ry=y*5;
    let ds=pts.map(p=>({c:p.c,d:dist(rx,ry,p.x,p.y)})).sort((a,b)=>a.d-b.d).slice(0,k);
    let v=[0,0]; ds.forEach(d=>v[d.c]++);
    let pred=v[1]>v[0]?1:0, conf=Math.max(v[0],v[1])/k;
    let i=(y*(W/5)+x)*4;
    if(pred===1){img.data[i]=56;img.data[i+1]=189;img.data[i+2]=248;} else{img.data[i]=255;img.data[i+1]=100;img.data[i+2]=100;}
    img.data[i+3]=conf*25;
  }
  rctx.putImageData(img,0,0);
  needsUpdate=false;
}

function draw(){
  ctx.clearRect(0,0,W,H);
  if(needsUpdate) updateRegions();
  ctx.imageSmoothingEnabled=true;
  ctx.drawImage(regionCanvas,0,0,W,H);

  // Neighbor analysis
  if(mx>=0){
    let ds=pts.map(p=>({...p,d:dist(p.x,p.y,mx,my)})).sort((a,b)=>a.d-b.d);
    let nb=ds.slice(0,k);

    // Radius circle
    if(nb.length){
      let rad=nb[nb.length-1].d;
      ctx.beginPath(); ctx.arc(mx,my,rad,0,TAU);
      ctx.strokeStyle='rgba(255,209,102,.12)'; ctx.lineWidth=1; ctx.stroke();
      ctx.fillStyle='rgba(255,209,102,.02)'; ctx.fill();
    }

    // Connection lines to neighbors with distance labels
    nb.forEach((n,i)=>{
      let progress=1-i/k;
      ctx.strokeStyle=`rgba(255,209,102,${.08+progress*.15})`; ctx.lineWidth=1;
      ctx.beginPath(); ctx.moveTo(mx,my); ctx.lineTo(n.x,n.y); ctx.stroke();
    });

    // Vote result
    let v=[0,0]; nb.forEach(n=>v[n.c]++); let pred=v[1]>v[0]?1:0;
    // Query point
    ctx.save();ctx.shadowColor=pred?'#38bdf8':'#ff6b6b';ctx.shadowBlur=18;
    ctx.beginPath(); ctx.arc(mx,my,11,0,TAU);
    ctx.fillStyle=pred?'rgba(56,189,248,.5)':'rgba(255,100,100,.5)'; ctx.fill();
    ctx.strokeStyle='#ffd166'; ctx.lineWidth=2.5; ctx.stroke();
    ctx.restore();

    // Info box
    ctx.fillStyle='rgba(6,6,12,.85)';
    ctx.beginPath();ctx.roundRect(10,10,240,48,8);ctx.fill();
    ctx.strokeStyle='#1e1e32';ctx.lineWidth=1;ctx.beginPath();ctx.roundRect(10,10,240,48,8);ctx.stroke();
    ctx.fillStyle='#ffd166'; ctx.font='600 12px Fira Code';
    ctx.fillText(`k=${k} â†’ ${pred?'ğŸ”µ Class B':'ğŸ”´ Class A'}`,20,32);
    ctx.fillStyle='#7d7a8c'; ctx.font='400 10px Fira Code';
    ctx.fillText(`votes: ${v[0]}ğŸ”´  ${v[1]}ğŸ”µ  (${(Math.max(...v)/k*100).toFixed(0)}% conf)`,20,48);
  }

  // Data points
  pts.forEach(p=>{
    ctx.beginPath(); ctx.arc(p.x,p.y,5.5,0,TAU);
    ctx.fillStyle=p.c?'#38bdf8':'#ff6b6b'; ctx.fill();
    ctx.strokeStyle='rgba(6,6,12,.6)'; ctx.lineWidth=1.2; ctx.stroke();
  });
}

c.onmousemove=e=>{const r=c.getBoundingClientRect();mx=(e.clientX-r.left)*W/r.width;my=(e.clientY-r.top)*H/r.height;draw()};
c.onmouseleave=()=>{mx=-1;my=-1;draw()};
c.onclick=e=>{const r=c.getBoundingClientRect();pts.push({x:(e.clientX-r.left)*W/r.width,y:(e.clientY-r.top)*H/r.height,c:0});needsUpdate=true;draw()};
c.oncontextmenu=e=>{e.preventDefault();const r=c.getBoundingClientRect();pts.push({x:(e.clientX-r.left)*W/r.width,y:(e.clientY-r.top)*H/r.height,c:1});needsUpdate=true;draw()};
c.onwheel=e=>{e.preventDefault();k=clamp(k+(e.deltaY>0?1:-1),1,25);needsUpdate=true;draw()};

const ctrl=addControls(el);
ctrl.innerHTML=`<label>k =</label><input type="range" min="1" max="25" value="5" id="kk"><span id="kkv" style="font-family:var(--mono);font-size:.75rem;color:var(--a3)">5</span><span style="font-family:var(--mono);font-size:.6rem;color:var(--text3);margin-left:.5rem">${pts.length} points</span>`;
$('kk').oninput=e=>{k=+e.target.value;$('kkv').textContent=k;needsUpdate=true;draw()};
updateRegions(); draw();
})();

// ============================================================
//  NAIVE BAYES â€” polished interactive email spam classifier
// ============================================================
(function(){
const el=$('demo-nb'), [c,ctx]=createCanvas(el,750,360);
addHint(el,'âŒ¨ï¸ Type in the input box below Â· Watch each word\'s spam/ham probability live');

const spamDict={free:.85,win:.82,money:.78,click:.75,offer:.72,prize:.7,buy:.65,cheap:.62,deal:.58,urgent:.68,lottery:.8,credit:.6,discount:.55};
const hamDict={hello:.82,meeting:.8,thanks:.78,project:.76,team:.73,report:.68,schedule:.65,review:.62,update:.58,discuss:.55,lunch:.5,tomorrow:.48};
let input='free money click offer', t=0;

function classify(text){
  let toks=text.toLowerCase().split(/\s+/).filter(Boolean);
  let ls=Math.log(.4), lh=Math.log(.6), details=[];
  toks.forEach(w=>{
    let ps=spamDict[w]||.08, ph=hamDict[w]||.08;
    ls+=Math.log(ps); lh+=Math.log(ph);
    details.push({w,ps,ph,ratio:ps/ph});
  });
  let mx=Math.max(ls,lh), es=Math.exp(ls-mx), eh=Math.exp(lh-mx), tt=es+eh;
  return{spam:es/tt, ham:eh/tt, details};
}

function draw(){
  t+=.02;
  let r=classify(input);
  ctx.clearRect(0,0,750,360);

  // Background gradient
  let isSpam=r.spam>r.ham;
  let grad=ctx.createLinearGradient(0,0,750,0);
  if(isSpam){grad.addColorStop(0,'rgba(255,107,107,.03)');grad.addColorStop(1,'rgba(6,6,12,0)');}
  else{grad.addColorStop(0,'rgba(6,6,12,0)');grad.addColorStop(1,'rgba(78,205,196,.03)');}
  ctx.fillStyle=grad; ctx.fillRect(0,0,750,360);

  // Gauge / meter
  let gx=50,gy=30,gw=650,gh=50;
  ctx.fillStyle='#111120'; ctx.beginPath();ctx.roundRect(gx,gy,gw,gh,8);ctx.fill();
  ctx.strokeStyle='#1e1e32';ctx.lineWidth=1;ctx.beginPath();ctx.roundRect(gx,gy,gw,gh,8);ctx.stroke();

  // Fill
  let spamW=gw*r.spam;
  ctx.fillStyle='rgba(255,107,107,.35)';
  ctx.beginPath();ctx.roundRect(gx,gy,spamW,gh,8);ctx.fill();
  ctx.fillStyle='rgba(78,205,196,.35)';
  ctx.beginPath();ctx.roundRect(gx+spamW,gy,gw-spamW,gh,8);ctx.fill();

  // Labels on gauge
  ctx.fillStyle='#ff6b6b'; ctx.font='700 18px Fraunces'; ctx.textAlign='left';
  ctx.fillText(`ğŸš« ${(r.spam*100).toFixed(1)}%`,gx+12,gy+33);
  ctx.fillStyle='#4ecdc4'; ctx.textAlign='right';
  ctx.fillText(`${(r.ham*100).toFixed(1)}% âœ‰ï¸`,gx+gw-12,gy+33);

  // Verdict
  ctx.textAlign='center';
  ctx.fillStyle=isSpam?'#ff6b6b':'#4ecdc4';
  ctx.font='900 28px Fraunces';
  ctx.fillText(isSpam?'SPAM':'HAM',375,130);
  ctx.fillStyle='#7d7a8c';ctx.font='400 11px Fira Code';
  ctx.fillText(isSpam?'This email looks suspicious!':'This email appears legitimate.',375,150);

  // Word analysis bars
  let wy=175;
  ctx.fillStyle='#7d7a8c';ctx.font='500 10px Fira Code';ctx.textAlign='left';
  ctx.fillText('Word-by-word analysis:',50,wy);
  wy+=15;

  r.details.slice(0,8).forEach((d,i)=>{
    let y=wy+i*22, barW=250;
    let isSpamWord=d.ratio>1;
    // Word label
    ctx.fillStyle=isSpamWord?'#ff6b6b':'#4ecdc4'; ctx.font='500 10px Fira Code';
    ctx.textAlign='left'; ctx.fillText(d.w,60,y+12);
    // Bar background
    ctx.fillStyle='#111120'; ctx.fillRect(160,y,barW,14);
    // Spam bar (from center)
    let center=160+barW/2;
    if(isSpamWord){
      let w=Math.min(d.ratio/10,1)*barW/2;
      ctx.fillStyle='rgba(255,107,107,.4)'; ctx.fillRect(center,y,w,14);
    } else {
      let w=Math.min(1/d.ratio/10,1)*barW/2;
      ctx.fillStyle='rgba(78,205,196,.4)'; ctx.fillRect(center-w,y,w,14);
    }
    // Center line
    ctx.strokeStyle='#252538';ctx.lineWidth=1;ctx.beginPath();ctx.moveTo(center,y);ctx.lineTo(center,y+14);ctx.stroke();
    // Ratio
    ctx.fillStyle='#e4e2df'; ctx.font='400 8px Fira Code'; ctx.textAlign='left';
    ctx.fillText(`${d.ratio.toFixed(1)}x`,420,y+11);
  });

  // Right side: probability explanation
  let rx=500, ry=wy;
  ctx.fillStyle='rgba(6,6,12,.85)';ctx.beginPath();ctx.roundRect(rx,ry-5,235,180,10);ctx.fill();
  ctx.strokeStyle='#1e1e32';ctx.lineWidth=1;ctx.beginPath();ctx.roundRect(rx,ry-5,235,180,10);ctx.stroke();

  ctx.fillStyle='#ffd166'; ctx.font='600 11px Fira Code'; ctx.textAlign='left';
  ctx.fillText('How Naive Bayes works:',rx+12,ry+14);
  ctx.fillStyle='#7d7a8c'; ctx.font='400 9px DM Sans';
  let explain=[
    '1. Start with prior: P(spam)=40%',
    '2. For each word, multiply by P(word|C)',
    '3. "Naive" = assume words independent',
    '4. Normalize to get final probability',
    '',
    'ğŸ’¡ "free" is 10Ã— more likely in spam',
    'ğŸ’¡ "meeting" is 10Ã— more likely in ham',
    'ğŸ’¡ More words â†’ more confident result'
  ];
  explain.forEach((l,i)=>ctx.fillText(l,rx+12,ry+32+i*16));
}

const ctrl=addControls(el);
let inp=document.createElement('input'); inp.type='text'; inp.value=input;
inp.style='background:var(--bg);border:1px solid var(--border);color:var(--text);padding:.4rem .8rem;border-radius:6px;font-family:var(--mono);font-size:.8rem;width:260px;outline:none';
inp.oninput=e=>{input=e.target.value;draw()};
ctrl.appendChild(inp);
['free money','hello meeting','urgent click offer','thanks for the update'].forEach(ex=>{
  let b=document.createElement('button');b.className='btn';b.textContent=ex;b.style='font-size:.55rem';
  b.onclick=()=>{input=ex;inp.value=ex;draw()};ctrl.appendChild(b);});
draw();
})();

// ============================================================
//  CHAIN RULE â€” animated computational graph with flowing gradients
// ============================================================
(function(){
const el=$('demo-chain'), [c,ctx]=createCanvas(el,750,360);
addHint(el,'ğŸ›ï¸ Adjust w and x sliders Â· Forward values flow right â†’ backward gradients flow â† left');
let w=1.5, x=2.0, t=0;

function draw(){
  t+=.018;
  ctx.clearRect(0,0,750,360);

  let z=w*x, a=sigmoid(z), L=(1-a)**2;
  let dLda=-2*(1-a), dadz=a*(1-a), dzdw=x, dzdx=w;
  let dLdz=dLda*dadz, dLdw=dLdz*dzdw, dLdx=dLdz*dzdx;

  const nodes=[
    {label:'w',sub:'weight',val:w,x:80,y:90,c:'#38bdf8',grad:dLdw},
    {label:'x',sub:'input',val:x,x:80,y:270,c:'#fb923c',grad:dLdx},
    {label:'z',sub:'wÂ·x',val:z,x:270,y:180,c:'#a78bfa',grad:dLdz},
    {label:'a',sub:'Ïƒ(z)',val:a,x:460,y:180,c:'#4ecdc4',grad:dLda},
    {label:'L',sub:'(1-a)Â²',val:L,x:640,y:180,c:'#ff6b6b',grad:1},
  ];
  const edges=[[0,2],[1,2],[2,3],[3,4]];

  // Background glow for each node
  nodes.forEach(n=>{
    let grad=ctx.createRadialGradient(n.x,n.y,0,n.x,n.y,60);
    grad.addColorStop(0,n.c+'0a'); grad.addColorStop(1,'transparent');
    ctx.fillStyle=grad; ctx.fillRect(n.x-60,n.y-60,120,120);
  });

  // Forward edges
  edges.forEach(([i,j])=>{
    let a=nodes[i], b=nodes[j];
    ctx.strokeStyle='rgba(255,255,255,.08)'; ctx.lineWidth=2;
    ctx.beginPath(); ctx.moveTo(a.x+28,a.y); ctx.lineTo(b.x-28,b.y); ctx.stroke();
    // Forward pulse
    let pulse=(Math.sin(t*2.5-i*.8)*.5+.5);
    let px=lerp(a.x+28,b.x-28,pulse), py=lerp(a.y,b.y,pulse);
    ctx.beginPath(); ctx.arc(px,py,3,0,TAU);
    ctx.fillStyle=`rgba(78,205,196,${.3+pulse*.4})`; ctx.fill();
    // Forward label
    let mx=(a.x+b.x)/2, my=(a.y+b.y)/2-10;
    ctx.fillStyle='#4a475a'; ctx.font='400 8px Fira Code'; ctx.textAlign='center';
    ctx.fillText(['Ã—x','Ã—w','Ïƒ()','loss'][edges.indexOf(arguments[1])]||'',mx,my);
  });

  // Backward gradient edges
  let backEdges=[[4,3],[3,2],[2,0],[2,1]];
  backEdges.forEach(([i,j],idx)=>{
    let a=nodes[i], b=nodes[j];
    let gradMag=clamp(Math.abs(b.grad),.01,5);
    ctx.strokeStyle=`rgba(255,107,107,${clamp(gradMag*.15,.05,.5)})`; ctx.lineWidth=.8+gradMag;
    ctx.setLineDash([5,4]);
    ctx.beginPath(); ctx.moveTo(a.x-28,a.y+12); ctx.lineTo(b.x+28,b.y+12); ctx.stroke();
    ctx.setLineDash([]);
    // Backward pulse
    let pulse=(Math.sin(t*2.5+idx*.8+2)*.5+.5);
    let px=lerp(a.x-28,b.x+28,pulse), py=lerp(a.y+12,b.y+12,pulse);
    ctx.beginPath(); ctx.arc(px,py,2.5,0,TAU);
    ctx.fillStyle=`rgba(255,107,107,${.3+pulse*.5})`; ctx.fill();
  });

  // Draw nodes
  nodes.forEach(n=>{
    ctx.save();
    ctx.shadowColor=n.c; ctx.shadowBlur=Math.abs(n.grad)*6+4;
    ctx.beginPath(); ctx.arc(n.x,n.y,24,0,TAU);
    ctx.fillStyle='#0c0c16'; ctx.fill();
    ctx.strokeStyle=n.c; ctx.lineWidth=2; ctx.stroke();
    ctx.restore();

    ctx.fillStyle=n.c; ctx.font='700 10px Fira Code'; ctx.textAlign='center'; ctx.textBaseline='middle';
    ctx.fillText(n.label,n.x,n.y-6);
    ctx.fillStyle='#e4e2df'; ctx.font='600 11px Fira Code';
    ctx.fillText(n.val.toFixed(3),n.x,n.y+8);

    // Sub label
    ctx.fillStyle='#4a475a'; ctx.font='400 8px Fira Code';
    ctx.fillText(n.sub,n.x,n.y-22);

    // Gradient label (below node)
    let gCol=Math.abs(n.grad)>0.5?'#ff6b6b':'#7d7a8c';
    ctx.fillStyle=gCol; ctx.font='500 9px Fira Code';
    ctx.fillText(`âˆ‡ ${n.grad.toFixed(4)}`,n.x,n.y+38);
  });

  // Chain rule equation at bottom
  ctx.textAlign='left'; ctx.textBaseline='alphabetic';
  ctx.fillStyle='rgba(6,6,12,.85)';ctx.beginPath();ctx.roundRect(20,310,710,42,8);ctx.fill();
  ctx.strokeStyle='#1e1e32';ctx.lineWidth=1;ctx.beginPath();ctx.roundRect(20,310,710,42,8);ctx.stroke();

  ctx.fillStyle='#ffd166'; ctx.font='600 11px Fira Code';
  ctx.fillText(`âˆ‚L/âˆ‚w = âˆ‚L/âˆ‚a Ã— âˆ‚a/âˆ‚z Ã— âˆ‚z/âˆ‚w = ${dLda.toFixed(3)} Ã— ${dadz.toFixed(3)} Ã— ${dzdw.toFixed(1)} = `,30,333);
  ctx.fillStyle='#ff6b6b'; ctx.font='700 13px Fira Code';
  ctx.fillText(`${dLdw.toFixed(4)}`,510,333);
  ctx.fillStyle='#34d399'; ctx.font='400 10px Fira Code';
  ctx.fillText(`w_new = ${(w-.1*dLdw).toFixed(4)}`,600,333);

  requestAnimationFrame(draw);
}

const ctrl=addControls(el);
ctrl.innerHTML=`<label>w</label><input type="range" min="-30" max="30" value="15" id="cw"><span id="cwv" style="font-family:var(--mono);font-size:.7rem;color:var(--a6)">1.5</span>
<label>x</label><input type="range" min="-30" max="30" value="20" id="cx"><span id="cxv" style="font-family:var(--mono);font-size:.7rem;color:var(--a7)">2.0</span>`;
$('cw').oninput=e=>{w=e.target.value/10;$('cwv').textContent=w.toFixed(1)};
$('cx').oninput=e=>{x=e.target.value/10;$('cxv').textContent=x.toFixed(1)};
draw();
})();
</script>
</body></html>

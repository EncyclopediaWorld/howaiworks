<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Section I ‚Äî The Dawn of Statistical Learning ¬∑ How AI Works</title>
<link rel="stylesheet" href="styles.css">
</head><body>
<div class="progress-bar" style="background:linear-gradient(90deg,var(--a1),var(--a2))"></div>
<button class="back-top" onclick="window.scrollTo({top:0,behavior:'smooth'})">‚Üë</button>
<nav class="topnav"><a href="index.html" class="logo">How AI Works</a><div class="nav-links"><a href="section1.html" class="active">I</a><a href="section2.html">II</a><a href="section3.html">III</a><a href="section4.html">IV</a><a href="section5.html">V</a><a href="section6.html">VI</a><a href="section7.html">VII</a><a href="section8.html">VIII</a></div></nav>
<div class="section-hero"><div class="era-label" style="color:var(--a1)">Section I ¬∑ 1800s‚Äì1960s</div>
<h1>The Dawn of Statistical Learning</h1><p>From Gauss's least squares to Rosenblatt's perceptron ‚Äî mathematics lays the foundation for machine intelligence.</p>
<div class="nav-arrows"><a href="index.html">&larr; Home</a><a href="section2.html">Section II &rarr;</a></div></div>
<div class="models-container">

<!-- ======= LINEAR REGRESSION ======= -->
<div class="model-card" id="model-linreg"><div class="mc-head"><span class="mc-year" style="color:var(--a1)">1805</span><div class="mc-info">
<h3>Linear Regression <a href="https://en.wikipedia.org/wiki/Least_squares" target="_blank" class="paper-link">Paper</a></h3>
<p>Legendre & Gauss's method of least squares ‚Äî fit a straight line to scattered data by minimizing the sum of squared errors.</p>
<div class="model-lineage">The mathematical foundation for all optimization-based learning; directly leads to <a href="section1.html#model-adaline">Adaline</a> and modern <a href="section3.html#model-backprop">Backpropagation</a>.</div>
</div></div>
<div class="mc-formula" style="color:var(--a1)">y = wx + b &nbsp; minimize Œ£(y·µ¢ - (wx·µ¢ + b))¬≤</div>
<div class="mc-demo" id="demo-lr"></div></div>

<!-- ======= BAYES' THEOREM ======= -->
<div class="model-card" id="model-bayes"><div class="mc-head"><span class="mc-year" style="color:var(--a1)">1812</span><div class="mc-info">
<h3>Bayes' Theorem <a href="https://en.wikipedia.org/wiki/Bayes%27_theorem" target="_blank" class="paper-link">Paper</a></h3>
<p>Update your belief based on new evidence. Prior √ó likelihood ‚Üí posterior. The core framework of probabilistic inference.</p>
<div class="model-lineage">The foundation of probabilistic reasoning; directly enables <a href="section2.html#model-naivebayes">Naive Bayes</a> classifiers and <a href="section4.html#model-gmm">GMM+EM</a> clustering.</div>
</div></div>
<div class="mc-formula" style="color:var(--a1)">P(A|B) = P(B|A)¬∑P(A) / P(B) &nbsp; posterior = likelihood √ó prior / evidence</div>
<div class="mc-demo" id="demo-bayes"></div></div>

<!-- ======= MARKOV CHAIN ======= -->
<div class="model-card" id="model-markov"><div class="mc-head"><span class="mc-year" style="color:var(--a1)">1906</span><div class="mc-info">
<h3>Markov Chain <a href="https://en.wikipedia.org/wiki/Markov_chain" target="_blank" class="paper-link">Paper</a></h3>
<p>Memoryless state transitions ‚Äî the next state depends only on the current state. Cornerstone of HMM, MCMC, and PageRank.</p>
<div class="model-lineage">Inspires sequential modeling; its memoryless limitation motivates <a href="section3.html#model-rnn">RNN</a> (which adds memory) and <a href="section3.html#model-boltzmann">Boltzmann Machine</a> sampling.</div>
</div></div>
<div class="mc-formula" style="color:var(--a1)">P(X‚Çô‚Çä‚ÇÅ|X‚Çô,X‚Çô‚Çã‚ÇÅ,...) = P(X‚Çô‚Çä‚ÇÅ|X‚Çô) &nbsp; memoryless property</div>
<div class="mc-demo" id="demo-markov"></div></div>

<!-- ======= PERCEPTRON ======= -->
<div class="model-card" id="model-perceptron"><div class="mc-head"><span class="mc-year" style="color:var(--a1)">1958</span><div class="mc-info">
<h3>Perceptron <a href="https://doi.org/10.1037/h0042519" target="_blank" class="paper-link">Paper</a></h3>
<p>Rosenblatt's first artificial neuron that could learn from data. Computes weighted sum of inputs; output 1 if above threshold, 0 otherwise.</p>
<div class="model-lineage">Builds on <a href="section1.html#model-linreg">Linear Regression</a> with a step activation; its linear-only limitation is fixed by <a href="section1.html#model-adaline">Adaline</a> and later <a href="section3.html#model-backprop">Backpropagation</a>.</div>
</div></div>
<div class="mc-formula" style="color:var(--a1)">y = step(w¬∑x + b) &nbsp; update: w += Œ∑(target - y)¬∑x</div>
<div class="mc-demo" id="demo-perceptron"></div></div>

<!-- ======= ADALINE ======= -->
<div class="model-card" id="model-adaline"><div class="mc-head"><span class="mc-year" style="color:var(--a1)">1960</span><div class="mc-info">
<h3>Adaline <a href="https://en.wikipedia.org/wiki/ADALINE" target="_blank" class="paper-link">Paper</a></h3>
<p>Widrow & Hoff's adaptive linear neuron ‚Äî unlike the Perceptron, Adaline computes error before the activation function, using gradient descent (LMS rule).</p>
<div class="model-lineage">Improves on <a href="section1.html#model-perceptron">Perceptron</a> by using continuous gradient descent instead of discrete updates; the LMS rule directly inspires <a href="section3.html#model-backprop">Backpropagation</a>.</div>
</div></div>
<div class="mc-formula" style="color:var(--a1)">Œîw = Œ∑(target - w¬∑x - b)¬∑x &nbsp; (LMS / Widrow-Hoff rule)</div>
<div class="mc-demo" id="demo-adaline"></div></div>

</div>
<footer><a href="index.html">&larr; Home</a> &middot; <a href="section2.html">Section II: Early Exploration &rarr;</a></footer>
<script src="shared.js"></script>
<script>
// ===== LINEAR REGRESSION =====
(function(){const el=$('demo-lr'),[c,ctx]=createCanvas(el,750,300);
addHint(el,'Click to add points, right-click to remove nearest. Best-fit line updates in real-time.');
let pts=[{x:100,y:230},{x:180,y:195},{x:260,y:175},{x:350,y:140},{x:430,y:110},{x:550,y:80},{x:620,y:60}];
function fit(){if(pts.length<2)return{w:0,b:150};let sx=0,sy=0,sxy=0,sxx=0,n=pts.length;
pts.forEach(p=>{sx+=p.x;sy+=p.y;sxy+=p.x*p.y;sxx+=p.x*p.x});let w=(n*sxy-sx*sy)/(n*sxx-sx*sx||1);return{w,b:(sy-w*sx)/n}}
function draw(){ctx.clearRect(0,0,750,300);
// Grid
for(let i=0;i<750;i+=75){ctx.strokeStyle='#1a1a2a';ctx.beginPath();ctx.moveTo(i,0);ctx.lineTo(i,300);ctx.stroke()}
for(let i=0;i<300;i+=75){ctx.beginPath();ctx.moveTo(0,i);ctx.lineTo(750,i);ctx.stroke()}
let{w,b}=fit();
if(pts.length>=2){
// Best-fit line
ctx.save();ctx.shadowColor='#ff6b6b';ctx.shadowBlur=10;ctx.strokeStyle='#ff6b6b';ctx.lineWidth=2.5;
ctx.beginPath();ctx.moveTo(0,b);ctx.lineTo(750,w*750+b);ctx.stroke();ctx.restore();
// Residual lines
let mse=pts.reduce((a,p)=>a+(p.y-(w*p.x+b))**2,0)/pts.length;
pts.forEach(p=>{ctx.strokeStyle='rgba(255,107,107,.3)';ctx.lineWidth=1;ctx.setLineDash([3,3]);
ctx.beginPath();ctx.moveTo(p.x,p.y);ctx.lineTo(p.x,w*p.x+b);ctx.stroke();ctx.setLineDash([])});
// Info panel
ctx.fillStyle='rgba(6,6,12,.88)';ctx.beginPath();ctx.roundRect(8,8,220,50,8);ctx.fill();
ctx.fillStyle='#ff6b6b';ctx.font='600 11px Fira Code';ctx.fillText('y = '+w.toFixed(3)+'x + '+b.toFixed(1),18,28);
ctx.fillStyle='#ffd166';ctx.font='500 10px Fira Code';ctx.fillText('MSE = '+mse.toFixed(1)+' | '+pts.length+' points',18,46)}
// Points
pts.forEach(p=>{ctx.save();ctx.shadowColor='#4ecdc4';ctx.shadowBlur=8;ctx.beginPath();ctx.arc(p.x,p.y,6,0,TAU);ctx.fillStyle='#4ecdc4';ctx.fill();ctx.restore()})}
c.onclick=e=>{let r=c.getBoundingClientRect();pts.push({x:(e.clientX-r.left)*750/r.width,y:(e.clientY-r.top)*300/r.height});draw()};
c.oncontextmenu=e=>{e.preventDefault();let r=c.getBoundingClientRect(),mx=(e.clientX-r.left)*750/r.width,my=(e.clientY-r.top)*300/r.height;
pts=pts.filter(p=>dist(p.x,p.y,mx,my)>15);draw()};
const ctrl=addControls(el);
const rb=document.createElement('button');rb.className='btn';rb.textContent='üé≤ Random';rb.onclick=()=>{pts=[];for(let i=0;i<10;i++)pts.push({x:rand(40,700),y:rand(20,280)});draw()};
const clr=document.createElement('button');clr.className='btn';clr.textContent='‚Üª Reset';clr.onclick=()=>{pts=[{x:100,y:230},{x:180,y:195},{x:260,y:175},{x:350,y:140},{x:430,y:110},{x:550,y:80},{x:620,y:60}];draw()};
ctrl.appendChild(rb);ctrl.appendChild(clr);draw()})();

// ===== BAYES' THEOREM ‚Äî Medical Diagnosis =====
(function(){const el=$('demo-bayes'),[c,ctx]=createCanvas(el,750,380);
addHint(el,'Adjust prevalence, sensitivity, and false positive rate. Watch 1000 people get tested ‚Äî see the surprising result!');
let prev=2,sens=95,fpr=5;
function draw(){ctx.clearRect(0,0,750,380);
let pop=1000,sick=Math.round(pop*prev/100),healthy=pop-sick;
let tp=Math.round(sick*sens/100),fn=sick-tp,fp=Math.round(healthy*fpr/100),tn=healthy-fp;
let totalPos=tp+fp,post=totalPos>0?tp/totalPos*100:0;
// Title
ctx.fillStyle='#ffd166';ctx.font='600 11px Fira Code';ctx.fillText('Scenario: 1,000 people take a medical test',15,20);
// Population grid
let gx=15,gy=32,gs=5,cols=50;
for(let i=0;i<pop;i++){let x=gx+(i%cols)*gs,y=gy+Math.floor(i/cols)*gs;
let isSick=i<sick,testPos=isSick?i<tp:i>=sick&&i<sick+fp;
ctx.fillStyle=isSick&&testPos?'#ff6b6b':isSick?'#a78bfa':testPos?'#fb923c':'#181828';
ctx.fillRect(x,y,gs-1,gs-1)}
// Legend
let ly=140;
[{c:'#ff6b6b',l:'True Positive (sick + test+): '+tp},{c:'#fb923c',l:'False Positive (healthy + test+): '+fp},
{c:'#a78bfa',l:'False Negative (sick + test‚àí): '+fn},{c:'#181828',l:'True Negative (healthy + test‚àí): '+tn,s:'#333'}].forEach((it,i)=>{
let lx=15+(i%2)*365,ly2=ly+Math.floor(i/2)*18;
ctx.fillStyle=it.c;ctx.fillRect(lx,ly2,10,10);if(it.s){ctx.strokeStyle=it.s;ctx.strokeRect(lx,ly2,10,10)}
ctx.fillStyle='#9a98a8';ctx.font='500 9px Fira Code';ctx.fillText(it.l,lx+16,ly2+9)});
// Big result panel
let ry=185;ctx.fillStyle='rgba(6,6,12,.92)';ctx.beginPath();ctx.roundRect(15,ry,720,100,12);ctx.fill();
ctx.strokeStyle='#1e1e32';ctx.lineWidth=1;ctx.beginPath();ctx.roundRect(15,ry,720,100,12);ctx.stroke();
ctx.fillStyle='#ffd166';ctx.font='700 13px Fira Code';ctx.fillText('‚äï You tested POSITIVE. Are you actually sick?',30,ry+24);
// Gauge bar
ctx.fillStyle='#111120';ctx.beginPath();ctx.roundRect(30,ry+36,500,24,6);ctx.fill();
let barW=500*post/100;
ctx.fillStyle=post>50?'#ff6b6b':post>20?'#ffd166':'#34d399';
ctx.beginPath();ctx.roundRect(30,ry+36,Math.max(barW,4),24,6);ctx.fill();
// Percentage label
ctx.fillStyle='#fff';ctx.font='800 14px Fira Code';
ctx.fillText(post.toFixed(1)+'%',barW>60?30+barW-55:38,ry+53);
// Explanation
ctx.fillStyle='#e4e2df';ctx.font='500 10px Fira Code';
ctx.fillText('P(sick | test+) = '+tp+' / ('+tp+' + '+fp+') = '+post.toFixed(1)+'%',30,ry+78);
ctx.fillStyle='#7d7a8c';ctx.font='400 9px Fira Code';
ctx.fillText(post<30?'Surprise! Even with a positive test, you\'re probably fine. Most positives are false alarms!':
post<70?'About even odds. The test helps but isn\'t conclusive.':'High probability ‚Äî the test is very informative here.',30,ry+94);
// Bottom explanation
ctx.fillStyle='rgba(6,6,12,.85)';ctx.beginPath();ctx.roundRect(15,295,720,78,10);ctx.fill();
ctx.fillStyle='#ff6b6b';ctx.font='600 10px Fira Code';ctx.fillText('Why is this surprising?',25,313);
ctx.fillStyle='#e4e2df';ctx.font='400 9px Fira Code';
ctx.fillText('When disease is rare ('+prev+'%), even a good test ('+sens+'% sens) produces many false positives',25,330);
ctx.fillText('from the large healthy group. P(sick|+) is dominated by the base rate (prevalence)!',25,346);
ctx.fillStyle='#a78bfa';ctx.font='500 9px Fira Code';
ctx.fillText('Bayes: P(sick|+) = P(+|sick)¬∑P(sick) / P(+) = '+sens+'%√ó'+prev+'% / '+(tp+fp)/10+'% = '+post.toFixed(1)+'%',25,366)}
const ctrl=addControls(el);
ctrl.innerHTML='<label>Prevalence</label><input type="range" min="1" max="50" value="2" id="bp"><span id="bpv" class="btn" style="min-width:32px;text-align:center">2%</span>'+
'<label>Sensitivity</label><input type="range" min="50" max="99" value="95" id="bs"><span id="bsv" class="btn" style="min-width:32px;text-align:center">95%</span>'+
'<label>FPR</label><input type="range" min="1" max="30" value="5" id="bf"><span id="bfv" class="btn" style="min-width:32px;text-align:center">5%</span>';
$('bp').oninput=e=>{prev=+e.target.value;$('bpv').textContent=prev+'%';draw()};
$('bs').oninput=e=>{sens=+e.target.value;$('bsv').textContent=sens+'%';draw()};
$('bf').oninput=e=>{fpr=+e.target.value;$('bfv').textContent=fpr+'%';draw()};
const rst=document.createElement('button');rst.className='btn';rst.textContent='‚Üª Reset';
rst.onclick=()=>{prev=2;sens=95;fpr=5;$('bp').value=2;$('bs').value=95;$('bf').value=5;$('bpv').textContent='2%';$('bsv').textContent='95%';$('bfv').textContent='5%';draw()};
ctrl.appendChild(rst);draw()})();

// ===== MARKOV CHAIN =====
(function(){const el=$('demo-markov'),[c,ctx]=createCanvas(el,750,320);
addHint(el,'Click states to start from there. Press Step to see random transitions following the probabilities shown on edges.');
const states=[{name:'Sunny',x:190,y:80,c:'#ffd166'},{name:'Cloudy',x:560,y:80,c:'#7d7a8c'},{name:'Rainy',x:375,y:240,c:'#38bdf8'}];
const trans=[[.6,.3,.1],[.2,.4,.4],[.3,.3,.4]];
let cur=0,history=[0],steps=0;
function draw(){ctx.clearRect(0,0,750,320);
// Draw transition arrows
trans.forEach((row,i)=>row.forEach((p,j)=>{if(p<.05)return;
let si=states[i],sj=states[j];
if(i===j){// Self-loop
let ax=si.x,ay=si.y-42;ctx.strokeStyle=si.c+'66';ctx.lineWidth=1+p*3;
ctx.beginPath();ctx.arc(ax,ay,18,0.3*Math.PI,0.7*Math.PI);ctx.stroke();
ctx.fillStyle=si.c;ctx.font='600 9px Fira Code';ctx.textAlign='center';ctx.fillText((p*100|0)+'%',ax,ay-22);ctx.textAlign='left';
}else{let dx=sj.x-si.x,dy=sj.y-si.y,len=Math.hypot(dx,dy);
let nx=dx/len,ny=dy/len;let ox=-ny*12,oy=nx*12;
let sx=si.x+nx*38+ox,sy=si.y+ny*38+oy,ex=sj.x-nx*38+ox,ey=sj.y-ny*38+oy;
ctx.strokeStyle=si.c+'55';ctx.lineWidth=1+p*3;ctx.beginPath();ctx.moveTo(sx,sy);ctx.lineTo(ex,ey);ctx.stroke();
// Arrowhead
let aLen=10;ctx.fillStyle=si.c+'88';ctx.beginPath();ctx.moveTo(ex,ey);
ctx.lineTo(ex-aLen*nx+aLen*.4*ny,ey-aLen*ny-aLen*.4*nx);ctx.lineTo(ex-aLen*nx-aLen*.4*ny,ey-aLen*ny+aLen*.4*nx);ctx.fill();
// Prob label
ctx.fillStyle=si.c;ctx.font='600 9px Fira Code';ctx.textAlign='center';
ctx.fillText((p*100|0)+'%',(sx+ex)/2+ox*.5,(sy+ey)/2+oy*.5);ctx.textAlign='left'}}));
// Draw state circles
states.forEach((s,i)=>{let isCur=i===cur;
ctx.save();if(isCur){ctx.shadowColor=s.c;ctx.shadowBlur=20}
ctx.beginPath();ctx.arc(s.x,s.y,isCur?36:30,0,TAU);
ctx.fillStyle=isCur?s.c+'33':'#0c0c16';ctx.fill();
ctx.strokeStyle=isCur?s.c:s.c+'55';ctx.lineWidth=isCur?3:1.5;ctx.stroke();ctx.restore();
ctx.fillStyle=isCur?'#fff':s.c;ctx.font=(isCur?'700':'500')+' 12px Fira Code';ctx.textAlign='center';
ctx.fillText(s.name,s.x,s.y+5);ctx.textAlign='left'});
// History trail
let hx=15,hy=295;
ctx.fillStyle='rgba(6,6,12,.85)';ctx.beginPath();ctx.roundRect(hx,hy-5,720,25,6);ctx.fill();
ctx.fillStyle='#7d7a8c';ctx.font='500 9px Fira Code';ctx.fillText('History: ',hx+5,hy+12);
let visH=history.slice(-18);
visH.forEach((h,i)=>{let x=hx+60+i*36;
ctx.fillStyle=states[h].c;ctx.font=(i===visH.length-1?'700':'400')+' 9px Fira Code';
ctx.fillText(states[h].name.slice(0,3),x,hy+12);
if(i<visH.length-1){ctx.fillStyle='#333';ctx.fillText('‚Üí',x+25,hy+12)}})}
function step(){let probs=trans[cur],r=Math.random(),cum=0;
for(let i=0;i<probs.length;i++){cum+=probs[i];if(r<=cum){cur=i;break}}
history.push(cur);steps++;draw()}
c.onclick=e=>{let r=c.getBoundingClientRect(),mx=(e.clientX-r.left)*750/r.width,my=(e.clientY-r.top)*320/r.height;
states.forEach((s,i)=>{if(dist(mx,my,s.x,s.y)<40){cur=i;history=[i];steps=0;draw()}})};
const ctrl=addControls(el);
const sb=document.createElement('button');sb.className='btn';sb.textContent='‚ñ∂ Step';sb.onclick=step;
let tmr=null;const ab=document.createElement('button');ab.className='btn';ab.textContent='‚è© Auto';
ab.onclick=()=>{if(tmr){clearInterval(tmr);tmr=null;ab.classList.remove('active')}else{tmr=setInterval(step,400);ab.classList.add('active')}};
const rst=document.createElement('button');rst.className='btn';rst.textContent='‚Üª Reset';
rst.onclick=()=>{cur=0;history=[0];steps=0;if(tmr){clearInterval(tmr);tmr=null;ab.classList.remove('active')}draw()};
ctrl.appendChild(sb);ctrl.appendChild(ab);ctrl.appendChild(rst);draw()})();

// ===== PERCEPTRON =====
(function(){const el=$('demo-perceptron'),[c,ctx]=createCanvas(el,750,320);
addHint(el,'Left-click = Red class, Right-click = Blue class. Hit Train to watch the boundary learn. Yellow ring = misclassified.');
let pts=[],w1=0,w2=0,b=0,lr=1,epoch=0,errs=0;
function seed(){pts=[];for(let i=0;i<8;i++){pts.push({x:rand(50,300),y:rand(40,280),c:0});pts.push({x:rand(450,710),y:rand(40,280),c:1})}}
seed();
function predict(px,py){return(w1*px+w2*py+b)>=0?1:0}
function trainEpoch(){errs=0;epoch++;let sh=[...pts].sort(()=>Math.random()-.5);
sh.forEach(p=>{let pred=predict(p.x,p.y),err=p.c-pred;if(err!==0){errs++;
w1+=lr*err*p.x;w2+=lr*err*p.y;b+=lr*err*375}})}
function draw(){ctx.clearRect(0,0,750,320);
// Decision regions
for(let py=0;py<320;py+=10)for(let px=0;px<750;px+=10){
let v=w1*px+w2*py+b;
ctx.fillStyle=v>=0?'rgba(56,189,248,0.06)':'rgba(255,107,107,0.06)';
ctx.fillRect(px,py,10,10)}
// Decision boundary
if(Math.abs(w1)>1e-10||Math.abs(w2)>1e-10){
ctx.save();ctx.shadowColor='#ffd166';ctx.shadowBlur=10;ctx.strokeStyle='#ffd166';ctx.lineWidth=2.5;ctx.beginPath();
if(Math.abs(w2)>1e-10){let y0=(-b-w1*0)/w2,y1=(-b-w1*750)/w2;ctx.moveTo(0,y0);ctx.lineTo(750,y1)}
else{let xv=-b/w1;ctx.moveTo(xv,0);ctx.lineTo(xv,320)}
ctx.stroke();ctx.restore()}
// Points
pts.forEach(p=>{let pred=predict(p.x,p.y),wrong=pred!==p.c;
ctx.save();if(!wrong){ctx.shadowColor=p.c?'#38bdf8':'#ff6b6b';ctx.shadowBlur=6}
ctx.beginPath();ctx.arc(p.x,p.y,wrong?8:6,0,TAU);ctx.fillStyle=p.c?'#38bdf8':'#ff6b6b';ctx.fill();
if(wrong){ctx.strokeStyle='#ffd166';ctx.lineWidth=2.5;ctx.stroke()}
ctx.restore()});
// Info panel
ctx.fillStyle='rgba(6,6,12,.88)';ctx.beginPath();ctx.roundRect(8,8,265,55,8);ctx.fill();
ctx.fillStyle='#ffd166';ctx.font='600 12px Fira Code';ctx.fillText('Epoch '+epoch,18,28);
ctx.fillStyle=errs>0?'#ff6b6b':'#34d399';ctx.fillText('  Errors: '+errs+'/'+pts.length,100,28);
if(errs===0&&epoch>0){ctx.fillStyle='#34d399';ctx.fillText('  ‚úÖ',230,28)}
ctx.fillStyle='#7d7a8c';ctx.font='400 9px Fira Code';
ctx.fillText('w‚ÇÅ='+w1.toFixed(3)+' w‚ÇÇ='+w2.toFixed(3)+' b='+b.toFixed(0),18,46);
// Algorithm rule at bottom
ctx.fillStyle='rgba(6,6,12,.85)';ctx.beginPath();ctx.roundRect(8,284,420,30,6);ctx.fill();
ctx.fillStyle='#ffd166';ctx.font='500 9px Fira Code';
ctx.fillText('Rule: if ≈∑ ‚â† y ‚Üí w += lr √ó (y ‚àí ≈∑) √ó x  (nudge weights toward correct answer)',18,303)}
c.onclick=e=>{let r=c.getBoundingClientRect();pts.push({x:(e.clientX-r.left)*750/r.width,y:(e.clientY-r.top)*320/r.height,c:0});draw()};
c.oncontextmenu=e=>{e.preventDefault();let r=c.getBoundingClientRect();pts.push({x:(e.clientX-r.left)*750/r.width,y:(e.clientY-r.top)*320/r.height,c:1});draw()};
const ctrl=addControls(el);
const tb=document.createElement('button');tb.className='btn';tb.textContent='‚ñ∂ Train √ó10';tb.onclick=()=>{for(let i=0;i<10;i++)trainEpoch();draw()};
let tmr=null;const ab=document.createElement('button');ab.className='btn';ab.textContent='‚è© Auto Train';
ab.onclick=()=>{if(tmr){clearInterval(tmr);tmr=null;ab.classList.remove('active')}else{tmr=setInterval(()=>{trainEpoch();draw();if(errs===0){clearInterval(tmr);tmr=null;ab.classList.remove('active')}},100);ab.classList.add('active')}};
const rst=document.createElement('button');rst.className='btn';rst.textContent='‚Üª Reset';
rst.onclick=()=>{seed();w1=0;w2=0;b=0;epoch=0;errs=0;if(tmr){clearInterval(tmr);tmr=null;ab.classList.remove('active')}draw()};
ctrl.appendChild(tb);ctrl.appendChild(ab);ctrl.appendChild(rst);draw()})();

// ===== ADALINE =====
(function(){const el=$('demo-adaline'),[c,ctx]=createCanvas(el,750,300);
addHint(el,'Watch gradient descent slowly fit the line. Loss curve (right) shows convergence. Compare with Perceptron above!');
let pts=[];for(let i=0;i<12;i++)pts.push({x:rand(30,440),y:rand(20,270)});
let w=0,b2=130,lr2=.0001,losses=[],ep=0;
function train(){if(!pts.length)return;let dw=0,db=0,n=pts.length;
pts.forEach(p=>{let e=(w*p.x+b2)-p.y;dw+=e*p.x;db+=e});w-=lr2*dw/n;b2-=lr2*db/n*100;ep++;
losses.push(pts.reduce((a,p)=>a+(p.y-(w*p.x+b2))**2,0)/n);if(losses.length>200)losses.shift()}
function draw(){ctx.clearRect(0,0,750,300);
// Grid
for(let x=0;x<465;x+=60){ctx.strokeStyle='#1a1a2a';ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,300);ctx.stroke()}
// Points
pts.forEach(p=>{ctx.save();ctx.shadowColor='#4ecdc4';ctx.shadowBlur=5;ctx.beginPath();ctx.arc(p.x,p.y,5,0,TAU);ctx.fillStyle='#4ecdc4';ctx.fill();ctx.restore()});
// Fit line
ctx.save();ctx.shadowColor='#ffd166';ctx.shadowBlur=8;ctx.strokeStyle='#ffd166';ctx.lineWidth=2.5;ctx.beginPath();ctx.moveTo(0,b2);ctx.lineTo(460,w*460+b2);ctx.stroke();ctx.restore();
// Residuals
pts.forEach(p=>{ctx.strokeStyle='rgba(255,107,107,.3)';ctx.lineWidth=1;ctx.beginPath();ctx.moveTo(p.x,p.y);ctx.lineTo(p.x,w*p.x+b2);ctx.stroke()});
// Loss curve panel
let rx=480,rw=260,rh=170;
ctx.fillStyle='rgba(6,6,12,.88)';ctx.beginPath();ctx.roundRect(rx,10,rw,rh,10);ctx.fill();
ctx.fillStyle='#ff6b6b';ctx.font='600 11px Fira Code';ctx.fillText('Loss Curve (MSE)',rx+10,30);
if(losses.length>1){let mx=Math.max(...losses),mn=Math.min(...losses);if(mx===mn)mx=mn+1;
ctx.strokeStyle='#ff6b6b';ctx.lineWidth=1.5;ctx.beginPath();
losses.forEach((l,i)=>{let x=rx+10+i*(rw-20)/200,y=40+(1-(l-mn)/(mx-mn))*(rh-55);i?ctx.lineTo(x,y):ctx.moveTo(x,y)});ctx.stroke()}
ctx.fillStyle='#7d7a8c';ctx.font='500 10px Fira Code';ctx.fillText('Epoch: '+ep,rx+10,rh-5);
if(losses.length)ctx.fillText('MSE: '+losses[losses.length-1].toFixed(1),rx+130,rh-5);
// Comparison panel
ctx.fillStyle='rgba(6,6,12,.88)';ctx.beginPath();ctx.roundRect(rx,195,rw,95,10);ctx.fill();
ctx.fillStyle='#a78bfa';ctx.font='600 10px Fira Code';ctx.fillText('Adaline vs Perceptron:',rx+10,215);
ctx.fillStyle='#e4e2df';ctx.font='400 9px Fira Code';
ctx.fillText('Perceptron: error after step fn',rx+10,235);
ctx.fillText('  ‚Üí discrete jumps, no gradient',rx+10,250);
ctx.fillText('Adaline: error on continuous output',rx+10,268);
ctx.fillText('  ‚Üí smooth gradient descent! ‚úì',rx+10,283)}
const ctrl=addControls(el);
let tmr=null;const ab=document.createElement('button');ab.className='btn';ab.textContent='‚è© Train';
ab.onclick=()=>{if(tmr){clearInterval(tmr);tmr=null;ab.classList.remove('active')}else{tmr=setInterval(()=>{for(let i=0;i<5;i++)train();draw()},30);ab.classList.add('active')}};
const rst=document.createElement('button');rst.className='btn';rst.textContent='‚Üª Reset';
rst.onclick=()=>{w=0;b2=130;losses=[];ep=0;if(tmr){clearInterval(tmr);tmr=null;ab.classList.remove('active')}draw()};
ctrl.appendChild(ab);ctrl.appendChild(rst);draw()})();
</script></body></html>
